{"version":3,"sources":["components/Tab.js","components/Notices.js","views/Home.js","App.js","reportWebVitals.js","index.js"],"names":["TabPane","Tabs","TabMap","Tab","props","state","mode","this","defaultActiveKey","from","tabPosition","onTabClick","setTab","map","item","index","tab","name","React","Component","Notices","data","className","href","link","target","rel","title","is_today","status","pub_date","PropType","PropTypes","array","Home","spinning","bind","setData","console","log","setState","process","url","axios","get","then","res","code","message","error","msg","catch","tip","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.171b63aa.chunk.js","sourcesContent":["import React from \"react\";\r\nimport {PropTypes} from \"prop-types\";\r\n\r\nimport {Tabs} from \"antd\";\r\n\r\nconst {TabPane} = Tabs;\r\n\r\nconst TabMap = [\r\n    {\r\n        \"from\": \"jwc\",\r\n        \"name\": \"教务处\"\r\n    }, {\r\n        \"from\": \"net\",\r\n        \"name\": \"网络信息中心\",\r\n    }, {\r\n        \"from\": \"www\",\r\n        \"name\": \"交大主页\",\r\n    }, {\r\n        \"from\": \"lib\",\r\n        \"name\": \"图书馆\",\r\n    }, {\r\n        \"from\": \"graduate\",\r\n        \"name\": \"研招网\"\r\n    }\r\n]\r\n\r\nclass Tab extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            mode: \"top\"\r\n        }\r\n    }\r\n    render() {\r\n        const {mode} = this.state;\r\n        return <>\r\n            <Tabs defaultActiveKey={TabMap ? TabMap[0].from : \"\"} tabPosition={mode} onTabClick={this.props.setTab}>\r\n                {TabMap.map((item, index) => (\r\n                        <TabPane tab={item.name} key={item.from}>\r\n                        </TabPane>\r\n                    )\r\n                )}\r\n            </Tabs>\r\n        </>\r\n    }\r\n}\r\n\r\nTab.propTypes = {\r\n    // 设置tab，点击的时候会发生改变\r\n    setTab: PropTypes.func.isRequired\r\n}\r\n\r\nexport default Tab\r\n","import React from \"react\";\r\nimport \"../style/Notices.css\";\r\nimport {PropTypes} from \"prop-types\"\r\nimport {Badge} from \"antd\";\r\n\r\nclass Notices extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {}\r\n    }\r\n\r\n    render() {\r\n        const {data} = this.props;\r\n        return <>\r\n            {data.map((item, index) => (\r\n                    <div className={\"notice-message\"} key={index}>\r\n                        <div className={\"notice-message-title\"}>\r\n                            <a className={\"notice-message-link\"} href={item.link} target=\"_blank\" rel={\"noreferrer\"}>\r\n                                {item.title}  {item.is_today?<Badge status={\"processing\"}/>:<></>}\r\n                            </a>\r\n                        </div>\r\n\r\n                        <div className=\"notice-message-pubDate\">\r\n                            {item.pub_date}\r\n                        </div>\r\n                    </div>\r\n                )\r\n            )}\r\n        </>\r\n    }\r\n}\r\n\r\nNotices.PropType = {\r\n    data: PropTypes.array\r\n}\r\n\r\n\r\nexport default Notices\r\n","import React from \"react\";\r\nimport Tab from \"../components/Tab\";\r\nimport \"../style/Home.css\";\r\nimport Notices from \"../components/Notices\";\r\nimport axios from \"axios\";\r\nimport {message, Spin} from \"antd\";\r\n\r\nconst ErrCode = -1 ;\r\n\r\n// 主页内容\r\nclass Home extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            // 默认情况下信息来源\r\n            tab: \"jwc\",\r\n            // 获取到的消息数据\r\n            data: [],\r\n            // 是否加载中\r\n            spinning:true\r\n        }\r\n        this.setTab = this.setTab.bind(this)\r\n    }\r\n    componentDidMount() {\r\n        this.setData(this.state.tab)\r\n    }\r\n\r\n    setTab(tab) {\r\n        console.log(\"click: \", tab)\r\n        this.setState({\r\n            tab: tab\r\n        }, ()=> {\r\n            this.setState({\r\n                spinning: true\r\n            })\r\n            this.setData(tab)\r\n        })\r\n    }\r\n\r\n    setData(tab) {\r\n        console.log(process.env)\r\n        let url = `${process.env.REACT_APP_API_URL}/api/notice/${tab}?limit=20`;\r\n        axios.get(url).then(res=>{\r\n            if(res.data.code===ErrCode){\r\n                message.error(res.data.msg)\r\n                return\r\n            }\r\n            this.setState({\r\n                data: res.data.data,\r\n                spinning: false\r\n            })\r\n\r\n        }).catch(()=>{\r\n            message.error(\"获取信息失败,请检查网络设施\")\r\n            this.setState({\r\n                spinning: false\r\n            })\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const {data, spinning} = this.state;\r\n        return <>\r\n            <div className={\"layout\"}>\r\n                <div>\r\n                    <Tab setTab={this.setTab}/>\r\n                </div>\r\n                <div className={\"content\"}>\r\n                    <Spin tip={\"加载中\"} spinning={spinning}>\r\n                        <Notices data={data}/>\r\n                    </Spin>\r\n                </div>\r\n            </div>\r\n        </>\r\n    }\r\n}\r\n\r\nexport default Home\r\n","import './App.css';\nimport \"antd/dist/antd.css\";\nimport Home from './views/Home';\n\nfunction App() {\n    return (\n        <div className={\"sjtu-message\"}>\n            <Home/>\n        </div>\n    );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n    if (onPerfEntry && onPerfEntry instanceof Function) {\n        import('web-vitals').then(({getCLS, getFID, getFCP, getLCP, getTTFB}) => {\n            getCLS(onPerfEntry);\n            getFID(onPerfEntry);\n            getFCP(onPerfEntry);\n            getLCP(onPerfEntry);\n            getTTFB(onPerfEntry);\n        });\n    }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n    <React.StrictMode>\n        <App/>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}